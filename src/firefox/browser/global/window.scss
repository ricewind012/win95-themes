@use "shared/controls";
@use "shared/window";
@use "shared++/icons";

#browser {
	padding-top: var(--window-gap);
}

.browserContainer > findbar {
	//background-color: transparent;
	border: none;

	// TODO(build): optimize
	.findbar-closebutton {
		--button-img: icon("clear");

		@include controls.button;
		@include controls.icon-button;
	}

	.findbar-container {
		height: unset;
	}

	// TODO(build): optimize
	.findbar-find-next,
	.findbar-find-previous {
		@include controls.button($disabled-sel: "[disabled]");
		@include controls.icon-button;
	}

	.findbar-find-next {
		@include icons.icon-big-arrow-left;
	}

	.findbar-find-previous {
		@include icons.icon-big-arrow-right;
	}

	.findbar-textbox {
		@include controls.text-field;
	}
}

menubar {
	width: 100%;

	& > menu {
		@include window.menubar-item($selected-sel: "&[open]");

		// TODO: why doesn't it inherit line-height here ?
		line-height: 1;
		border: none;
	}
}

// xul sucks
sidebar-main {
	padding-bottom: calc(var(--statusbar-height) + var(--window-gap));

	position: relative;

	&::before {
		content: "";

		position: absolute;
		bottom: 0;
		width: 100%;
		height: var(--statusbar-height);
		box-sizing: border-box;

		@include window.statusbar-item;
	}
}

#statuspanel {
	--inset-bottom: calc(var(--statusbar-height) * -1 - var(--window-gap));
	--width: calc(100% + var(--border-size) * 2);

	@include window.statusbar-item;

	visibility: visible;
	opacity: 1;
	margin: calc(var(--border-size) * -1);

	bottom: var(--inset-bottom);
	width: var(--width);
	max-width: var(--width);
	height: var(--statusbar-height);

	.browserStack:has(+ findbar:not([hidden])) > & {
		// TODO: for now
		bottom: calc(var(--inset-bottom) - 34px);
	}
}

#statuspanel-label {
	border: none;
	padding: 0;
	margin: 0;

	#statuspanel[inactive] > & {
		visibility: hidden;
	}
}

#tabbrowser-tabbox {
	#main-window:not([inFullscreen], [sizemode="maximized"]) & {
		@include window.content-container;

		margin-bottom: calc(var(--statusbar-height) + var(--window-gap));

		overflow: visible;
	}
}

#toolbar-menubar {
	@include window.menubar;

	flex-direction: column;

	&::after {
		content: "";

		width: 100%;

		@include controls.separator;
	}
}

#toolbar-menubar {
	padding: 0;
}
